<!DOCTYPE html>
<html>
<head>
    <title>LOLLMs Example</title>
    <script src="lollms_client_js.js"></script>
</head>
<body>
    <button id="generate">Generate Text</button>
    <div id="output"></div>

    <script>
        async function generateText(prompt, options = {}) {
            const defaultOptions = {
              modelName: null,
              personality: -1,
              nPredict: 1024,
              temperature: 0.1,
              topK: 50,
              topP: 0.95,
              repeatPenalty: 0.8,
              repeatLastN: 40,
              seed: null,
              nThreads: 8,
            };
          
            const requestOptions = {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                prompt,
                ...defaultOptions,
                ...options,
              }),
            };
          
            try {
              const response = await fetch('http://localhost:9600/lollms_generate', requestOptions);
  
              if (response.ok) {
                const data = await response.text();
                return data;
              } else {
                throw new Error(`Request failed with status ${response.status}`);
              }
            } catch (error) {
              console.error('Error:', error);
              return { status: false, error: error.message };
            }
        }

        document.getElementById('generate').addEventListener('click', async () => {
            const prompt = 'What is a good example of a Large Language Model?';
            const options = {
                modelName: 'YourModelName',
                personality: 1,
                nPredict: 1024,
                temperature: 0.1,
                topK: 50,
                topP: 0.95,
                repeatPenalty: 0.8,
                repeatLastN: 40,
                seed: null,
                nThreads: 8,
            };

            try {
                const result = await generateText(prompt, options);
                if (result.status) {
                    document.getElementById('output').textContent = result.response;
                } else {
                    document.getElementById('output').textContent = `Error: ${result.error}`;
                }
            } catch (error) {
                document.getElementById('output').textContent = `Error: ${error.message}`;
            }
        });
    </script>
</body>
</html>